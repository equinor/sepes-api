name: Check for breaking change

on:
  push:
    branches: [develop, master]
  pull_request:
    # The branches below must be a subset of the branches above
    branches: [develop]
  schedule:
    - cron: "0 19 * * 6"

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v1
      - run: dir
      - run: dir .github
      - run: dir .github/scripts
      - uses: Amadevus/pwsh-script@v2
        id: my-script
        with:
          script: ./.github/scripts/breakingChangeInDevelop.ps1

      # - name: Run a one-line script
      #   id: test1
      #   run: echo "##[set-output name=data;]$(date)"
      #     shell: powershell
      - run: "${{ steps.my-script.outputs.result }}"

      - name: Time badge
        uses: RubbaBoy/BYOB@v1.2.1
        with:
          NAME: breaking_change_status
          LABEL: ${{ steps.my-script.outputs.result }}
          STATUS: ${{ steps.my-script.outputs.result }}
          COLOR: 00EEEA
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
